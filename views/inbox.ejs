<%- include('./layouts/header.ejs') %>
  <body>
    <div id="chat-container">
      <div id="search-container">
        <input type="text" placeholder="Search" />
      </div>
      <div id="conversation-list">
        <div class="conversation active">
          <img src="./images/user1.png" alt="Sumit" />
          <div class="title-text">Sumit Saha</div>
          <di class="created-date"> Apr 16 </di>
          <div class="conversation-message">This is a message</div>
        </div>
        <div class="conversation">
          <img src="./images/user2.png" alt="Sumit" />
          <div class="title-text">Sumit Saha</div>
          <di class="created-date"> Apr 16 </di>
          <div class="conversation-message">This is a message</div>
        </div>
      </div>
      <div id="new-message-container">
        <div id="addUserButtonMainDIv">
            <a href="#" >
              <img src="./images/plus.png" >
            </a>
        </div>
      </div>
      <div id="chat-title">
        <span>Sumit</span>
        <img src="./images/trash.png" alt="Delete Conversation" />
      </div>
      <div id="chat-message-list">
        <div class="message-row other-message">
          <div class="message-content">
            <img src="./images/user1.png" alt="Sumit" />
            <div class="message-text">Ok then</div>
            <div class="message-time">Apr 16</div>
          </div>
        </div>
        <div class="message-row you-message">
          <div class="message-content">
            <div class="message-text">Lorem ipsum dolor sit amet</div>
            <div class="message-time">Apr 16</div>
          </div>
        </div>
      </div>
      <div id="chat-form">
        <img src="./images/attachment.png" alt=Add Attachment"" />
        <input type="text" placeholder="Type a message" />
      </div>
    </div>

    <div class="modal-wrapper">
      <div class="modal">
        <a href="#" class="modal-close">+</a>
        <div class="modal-title">
          <h2>Create New Conversation</h2>
        </div>
        <div class="modal-body">
          <form id="selectUserForm">
            <select class="form-control" id="selectUserOption" name="user_id">
                    <option value="">Select User</option>
                    <% users.forEach( function (user) { %>
                        <option value="<%= user._id %>"><%= user.name %></option>
                    <% }); %>
                </select>
          </form>
        </div>
      </div>
    </div>

    <script>
        var addUserButtonMainDIv = document.getElementById('addUserButtonMainDIv');
        var addUserButtonMainDIvImage = document.querySelector('#addUserButtonMainDIv > a > img');
        var modalWrapper = document.querySelector('.modal-wrapper');
        var closeModal = document.querySelector('.modal-close');
        var selectUserOption = document.getElementById('selectUserOption');

        selectUserOption.addEventListener('change', function(e){
            var selectedUserId = e.target.value;
            console.log(selectedUserId);
        });

        closeModal.addEventListener('click', function(e) {
            modalWrapper.classList.remove('show-modal');
        });

        addUserButtonMainDIv.addEventListener('click', function(e) {

            addUserButtonMainDIvImage.classList.add('zoom-in-zoom-out');

            setTimeout(function(){
                addUserButtonMainDIvImage.classList.remove('zoom-in-zoom-out');
            }, 1000);

            modalWrapper.classList.add('show-modal');
        });

    </script>

  </body>
</html>
